Tests for buildout.minitagificator buildout extension
-------------------------------------------------------

Let's create a buildout configuration file::

    >>> data = """
    ... [buildout]
    ... parts =
    ...     part
    ... extensions = buildout.minitagificator
    ... [part]
    ... recipe=iw.recipe.cmd
    ... on-install=true
    ... on-update=true
    ... cmds=ls
    ... [egg]
    ... recipe=zc.recipe.egg:eggs
    ... eggs=zc.buildout
    ... [script]
    ... recipe=zc.recipe.egg:scripts
    ... eggs=zc.buildout
    ... scripts=buildout
    ... """
    >>> rmdir(tempdir, 'buildout.test')
    >>> cd(tempdir)
    >>> sh('mkdir buildout.test')
    mkdir buildout.test
    <BLANKLINE>
    >>> cd('buildout.test')
    >>> touch('buildout.cfg', data=data)
    >>> ls('.')
    buildout.cfg

Run the buildout and see the patch in action :=)::

    >>> a= [mkdir(d) for d in ('eggs', 'develop-eggs', 'bin', 'src')]
    >>> install_develop_eggs(['buildout.minitagificator'])
    >>> install_eggs_from_pathes(['buildout.minitagificator'], sys.path)
    >>> buildout('bootstrap')
    Creating directory '/tmp/buildout.test/parts'.
    Generated script '/tmp/buildout.test/bin/buildout'.
    >>> sh('bin/buildout -vvvvv install part')
    bin/buildout...
    Installing part.
    buildout.minitagificator: Minitaging some recipes
    buildout.minitagificator: Patched zc.recipe.egg.Egg
    buildout.minitagificator: Patched zc.recipe.egg.Eggs
    buildout.minitagificator: Patched zc.recipe.egg.Scripts
    buildout.minitagificator: Patched zc.recipe.egg.custom
    buildout.minitagificator: ...zc.recipe.cmmi...
    <BLANKLINE>

We also monkey patch zc.recipe.egg stuff, to get our eggs happily installed with minitage recipes.::

    >>> sh('bin/buildout install egg')
    bin/buildout install egg
    buildout.minitagificator: Minitaging Buildout Installer
    buildout.minitagificator: Minitaging Buildout scripts
    buildout.minitagificator: Minitaging Buildout Options
    buildout.minitagificator: Minitaging some recipes...
    Installing egg...
    <BLANKLINE>

    >>> sh('bin/buildout install script')
    bin/buildout install script
    buildout.minitagificator: Minitaging Buildout Installer
    buildout.minitagificator: Minitaging Buildout scripts
    buildout.minitagificator: Minitaging Buildout Options
    buildout.minitagificator: Minitaging some recipes...
    Installing script.
    buildout.minitagificator: Minitaging some recipes...
    minitage.recipe: Generated scripts: 'buildout', 'easy_install', 'easy_install-2.6'.
    <BLANKLINE>


